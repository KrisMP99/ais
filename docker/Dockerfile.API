# syntax=docker/dockerfile:1
FROM python:latest
WORKDIR /srv/data/ais/backend

RUN apt-get update
RUN apt-get install -y software-properties-common && apt-get update

# Install GDAL dependencies
RUN add-apt-repository ppa:ubuntugis/ppa &&  apt-get update
RUN apt-get install -y gdal-bin libgdal-dev

# Update C env vars so compiler can find gdal
ENV CPLUS_INCLUDE_PATH=/usr/include/gdal
ENV C_INCLUDE_PATH=/usr/include/gdal

RUN python -m venv /opt/venv
# Enable venv
ENV PATH="/opt/venv/bin:$PATH"

COPY backend/requirements.txt requirements.txt
RUN pip3 install -r requirements.txt